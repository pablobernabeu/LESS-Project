---
title: "stroop2"
author: "Gabriella Silva"
date: "2024-05-30"
output: html_document
---

```{r setup, include=FALSE}
library(dplyr)
library(readr)
library(tidyverse)
library(janitor)
library(readxl)

# Definir el path
path <- "Raw data/Executive functions/Session 1"

# Leer los datos
Stroop_1 <- read_csv(file.path(path, "Stroop_DGS.csv"))
Stroop_2 <- read_csv(file.path(path, "Stroop_Stroop.csv"))
Stroop_3 <- read_csv(file.path(path, "Stroop_ASRT.csv"))

# Cargar los archivos CSV adicionales
Stroop_1_extra <- read_csv(file.path(path, "qdvg4_Stroop_DGS.csv"))
Stroop_2_extra_1 <- read_csv(file.path(path, "wbij5_Stroop_Stroop.csv"))
Stroop_2_extra_2 <- read_csv(file.path(path, "xqls8_Stroop_Stroop.csv"))

# Convierte la columna "Reaction Time" en ambos data frames a tipo numérico (double)
Stroop_1$`Reaction Time` <- as.numeric(Stroop_1$`Reaction Time`)
Stroop_1_extra$`Reaction Time` <- as.numeric(Stroop_1_extra$`Reaction Time`)

# Combinar los data frames
Stroop_1 <- bind_rows(Stroop_1, Stroop_1_extra)
Stroop_2 <- bind_rows(Stroop_2, Stroop_2_extra_1, Stroop_2_extra_2)

# Limpiar nombres de columnas
colnames(Stroop_1) <- make.names(colnames(Stroop_1))
colnames(Stroop_2) <- make.names(colnames(Stroop_2))
colnames(Stroop_3) <- make.names(colnames(Stroop_3))

print(colnames(Stroop_1))

# Seleccionar columnas relevantes
Stroop_1 <- Stroop_1 %>%
  select(Reaction.Time, Participant.Public.ID, Correct, Incorrect, Congruency, Zone.Type)

Stroop_2 <- Stroop_2 %>%
  select(Reaction.Time, Participant.Public.ID, Correct, Incorrect, Congruency,Zone.Type)

Stroop_3 <- Stroop_3 %>%
  select(Reaction.Time, Participant.Public.ID, Correct, Incorrect, Congruency, Zone.Type)

# Combinar los dataframes
merged_Stroop_2 <- bind_rows(Stroop_1, Stroop_2, Stroop_3)



# Filtro para eliminar filas donde Zone.Type no es "response"
merged_Stroop_2 <- merged_Stroop_2 %>%
  filter(Zone.Type == "response_keyboard")


 # Filtrar y limpiar los datos eliminando NA y asegurándose de que Congruency sea un factor
cleaned_data_Stroop <- merged_Stroop %>%
  drop_na(Reaction.Time, Congruency) %>%
  mutate(Congruency = factor(Congruency, levels = c(0, 1), labels = c("incongruent", "congruent")))


# Calcular la media del tiempo de reacción según la congruencia por cada participante
mean_reaction_time_stroop <- cleaned_data_Stroop %>%
  group_by(Participant.Public.ID, Congruency) %>%
  summarize(mean_reaction_time = mean(Reaction.Time, na.rm = TRUE))

# Ver el resultado
print(mean_reaction_time)

# Calcular la diferencia entre los tiempos de reacción de cada congruencia por cada participante
difference_reaction_time <- mean_reaction_time_stroop %>%
  group_by(Participant.Public.ID) %>%
  pivot_wider(names_from = Congruency, values_from = mean_reaction_time) %>%
  mutate(difference_reaction_time = congruent - incongruent)

# Ver el resultado
# View(difference_reaction_time)

# Guardar el resultado en un archivo CSV
write_csv(difference_reaction_time, "difference_reaction_time_stroop.csv")


````

